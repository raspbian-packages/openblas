Description: Add support for TARGET=ZARCH_GENERIC and TARGET=Z13
 Needed in order to build a generic enough package (using TARGET=ZARCH_GENERIC).
Author: SÃ©bastien Villemot <sebastien@debian.org>
Bug-Debian: https://bugs.debian.org/875618
Forwarded: https://github.com/xianyi/OpenBLAS/pull/1308
Last-Update: 2017-09-19
---
This patch header follows DEP-3: http://dep.debian.net/deps/dep3/
--- a/getarch.c
+++ b/getarch.c
@@ -137,6 +137,8 @@ USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 /* #define FORCE_ITANIUM2	*/
 /* #define FORCE_SPARC		*/
 /* #define FORCE_SPARCV7	*/
+/* #define FORCE_ZARCH_GENERIC	*/
+/* #define FORCE_Z13		*/
 /* #define FORCE_GENERIC	*/
 
 #ifdef FORCE_P2
@@ -964,6 +966,26 @@ USE OF THIS SOFTWARE, EVEN IF ADVISED OF
 #else
 #endif
 
+#ifdef FORCE_ZARCH_GENERIC
+#define FORCE
+#define ARCHITECTURE    "ZARCH"
+#define SUBARCHITECTURE "ZARCH_GENERIC"
+#define ARCHCONFIG   "-DZARCH_GENERIC " \
+       "-DDTB_DEFAULT_ENTRIES=64"
+#define LIBNAME   "zarch_generic"
+#define CORENAME  "ZARCH_GENERIC"
+#endif
+
+#ifdef FORCE_Z13
+#define FORCE
+#define ARCHITECTURE    "ZARCH"
+#define SUBARCHITECTURE "Z13"
+#define ARCHCONFIG   "-DZ13 " \
+       "-DDTB_DEFAULT_ENTRIES=64"
+#define LIBNAME   "z13"
+#define CORENAME  "Z13"
+#endif
+
 #ifndef FORCE
 
 #if defined(__powerpc__) || defined(__powerpc) || defined(powerpc) || \
--- a/TargetList.txt
+++ b/TargetList.txt
@@ -85,3 +85,6 @@ VULCAN
 THUNDERX
 THUNDERX2T99
 
+9.System Z:
+ZARCH_GENERIC
+Z13
